<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learnfy - Dashboard</title>
  <link rel="shortcut icon" href="assets/images/favicon.png" type="image/x-icon" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="./assets/styles/dashboard.css" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
  <div class="main">
    <div class="side-bar">
      <div class="menu">
        <a href="index.html">
          <img src="./assets/images/BrancoComTexto.png" alt="Logo Learnfy" />
        </a>
        <ul>
          <li>
            <a href="index.html" style="display: flex; flex-direction: column;" class="icon-link">
              <img src="./assets/images/user.png" alt="" id="avatar">
              <span>Olá, <b>Adauto</b> <i class='bx bx-pencil'></i></span>
            </a>
          </li>
          <li>
            <a href="index.html" class="icon-link" onclick="clear()">
              <i class='bx bx-home-alt-2'></i>
              <span>Home</span>
            </a>
          </li>
          <li>
            <a href="edit-person.html" class="icon-link">
              <i class='bx bx-user'></i>
              <span>Perfil</span>
            </a>
          </li>


          <li>
            <a href="selection-dashboard.html" class="icon-link">
              <i class='bx bx-line-chart'></i>
              <span>Dashboards</span>
            </a>
          </li>
          <li>
            <a href="#" class="icon-link">
              <i class='bx bx-id-card'></i>
              <span>Gestão</span>
            </a>
          </li>
        </ul>
      </div>

      <div class="log-out">
        <div class="help-item icon-link">
          <a href="">
            <i class='bx bx-help-circle'></i>
            <span>Ajuda</span>
          </a>
        </div>
        <div class="out-item icon-link">
          <a href="">
            <i class='bx bx-log-out log-out-item'></i>
            <a href="index.html" onclick="clear()">
              <span>Sair</span>
            </a>

          </a>
        </div>
      </div>
    </div>
    <div class="main-content">

      <div class="main-section">
        <div class="left-content">
          <div class="kpi-section">
            <div class="kpi-section">
              <div class="kpi-container">
                <div class="kpi">
                  <span class="kpi-title">Taxa de Retenção de Alunos no Semestre</span>
                  <div class="data-info">
                    <span id="valor1">82%</span><br>
                    dos alunos continuam matriculados após o semestre letivo
                  </div>
                </div>

                <div class="kpi">
                  <span class="kpi-title">Alunos com Desempenho Crítico</span>
                  <div class="data-info">
                    <span id="valor2">125</span><br>
                    estudantes com média inferior a 6.0 no período
                  </div>
                </div>
              </div>

              <div class="kpi-container">
                <div class="kpi">
                  <span class="kpi-title">Taxa de Retenção Regional</span>
                  <div class="data-info">
                    <span id="valor3">78%</span><br>
                    permanência média de alunos nas regiões analisadas
                  </div>
                </div>

                <div class="kpi">
                  <span class="kpi-title">Inscrição em Cursos Superiores</span>
                  <div class="data-info">
                    <span id="valor4">315</span><br>
                    novas matrículas registradas no último mês
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div id="container-bar" style="width: 100%; height: 50%;"></div>
        </div>
        <div id="container" style="width: 80%; height: 90vh; "></div>
      </div>
</body>
</html>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://code.highcharts.com/maps/highmaps.js"></script>
<script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
<script src="./assets/javascript/dashboard.js"></script>
<script>
  Highcharts.chart('container-bar', {
    chart: {
      type: 'column'
    },
    title: {
      text: 'Inscritos no ENEM por Capitais no ano de 2024'
    },

    xAxis: {
      type: 'category',
      labels: {
        autoRotation: [-45, -90],
        style: {
          fontSize: '13px',
          fontFamily: 'Verdana, sans-serif'
        }
      }
    },
    yAxis: {
      min: 0,
      title: {
        text: 'Inscritos (milhares)'
      }
    },
    legend: {
      enabled: false
    },
    series: [{
      name: 'Inscritos',
      colors: [
        '#800000'
      ],
      colorByPoint: true,
      groupPadding: 0,
      data: [
        ['São Paulo', 33230],
        ['Rio de Janeiro', 24275],
        ['Belo Horizonte', 19080],
        ['Brasília', 27460],
        ['Salvador', 16510],
        ['Curitiba', 15451],
        ['Fortaleza', 19901],
        ['Manaus', 13820],
        ['Recife', 13203],
        ['Porto Alegre', 12503],
        ['Goiânia', 11801],
        ['Belém', 10901],
        ['Campinas', 9810],
        ['São Luís', 19110],
        ['Maceió', 11850],
        ['Natal', 9790],
        ['Teresina', 14570],
        ['João Pessoa', 14100],
        ['Cuiabá', 13660],
        ['Aracaju', 13620]

      ]
    }]
  });
  (async () => {
  const topology = await fetch(
    'https://code.highcharts.com/mapdata/countries/br/br-all.topo.json'
  ).then(response => response.json());

  const data = [
    ['br-sp', 0],
    ...[
      'br-ma', 'br-pa', 'br-sc', 'br-ba', 'br-ap', 'br-ms', 'br-mg', 'br-go', 'br-rs',
      'br-to', 'br-pi', 'br-al', 'br-pb', 'br-ce', 'br-se', 'br-rr', 'br-pe', 'br-pr',
      'br-es', 'br-rj', 'br-rn', 'br-am', 'br-mt', 'br-df', 'br-ac', 'br-ro'
    ].map(code => [code, 1])
  ];

  const siglasEstados = {
    'Acre': 'AC', 'Alagoas': 'AL', 'Amapá': 'AP', 'Amazonas': 'AM',
    'Bahia': 'BA', 'Ceará': 'CE', 'Distrito Federal': 'DF', 'Espírito Santo': 'ES',
    'Goiás': 'GO', 'Maranhão': 'MA', 'Mato Grosso': 'MT', 'Mato Grosso do Sul': 'MS',
    'Minas Gerais': 'MG', 'Pará': 'PA', 'Paraíba': 'PB', 'Paraná': 'PR',
    'Pernambuco': 'PE', 'Piauí': 'PI', 'Rio de Janeiro': 'RJ', 'Rio Grande do Norte': 'RN',
    'Rio Grande do Sul': 'RS', 'Rondônia': 'RO', 'Roraima': 'RR', 'Santa Catarina': 'SC',
    'São Paulo': 'SP', 'Sergipe': 'SE', 'Tocantins': 'TO'
  };

  const dadosPorEstado = {
    'AC': { kpi1: 78.5, kpi2: 1200, kpi3: 76.3, kpi4: 350 },
    'AL': { kpi1: 72.3, kpi2: 1800, kpi3: 74.9, kpi4: 430 },
    'AM': { kpi1: 80.1, kpi2: 950, kpi3: 81.0, kpi4: 600 },
    'AP': { kpi1: 75.2, kpi2: 1100, kpi3: 78.2, kpi4: 370 },
    'BA': { kpi1: 70.6, kpi2: 2500, kpi3: 72.5, kpi4: 890 },
    'CE': { kpi1: 76.8, kpi2: 2100, kpi3: 75.1, kpi4: 760 },
    'DF': { kpi1: 85.5, kpi2: 700, kpi3: 84.2, kpi4: 980 },
    'ES': { kpi1: 83.1, kpi2: 650, kpi3: 81.3, kpi4: 740 },
    'GO': { kpi1: 80.0, kpi2: 1300, kpi3: 77.0, kpi4: 560 },
    'MA': { kpi1: 68.4, kpi2: 2400, kpi3: 70.8, kpi4: 490 },
    'MG': { kpi1: 84.0, kpi2: 900, kpi3: 82.0, kpi4: 970 },
    'MS': { kpi1: 82.3, kpi2: 820, kpi3: 79.9, kpi4: 510 },
    'MT': { kpi1: 81.7, kpi2: 910, kpi3: 80.5, kpi4: 500 },
    'PA': { kpi1: 74.6, kpi2: 1700, kpi3: 75.2, kpi4: 660 },
    'PB': { kpi1: 77.4, kpi2: 1150, kpi3: 76.1, kpi4: 410 },
    'PE': { kpi1: 78.8, kpi2: 1400, kpi3: 77.3, kpi4: 590 },
    'PI': { kpi1: 75.5, kpi2: 1250, kpi3: 74.5, kpi4: 420 },
    'PR': { kpi1: 86.2, kpi2: 800, kpi3: 83.7, kpi4: 960 },
    'RJ': { kpi1: 81.0, kpi2: 1500, kpi3: 79.1, kpi4: 1040 },
    'RN': { kpi1: 79.3, kpi2: 1080, kpi3: 77.5, kpi4: 440 },
    'RO': { kpi1: 76.1, kpi2: 990, kpi3: 75.9, kpi4: 390 },
    'RR': { kpi1: 74.8, kpi2: 1050, kpi3: 73.2, kpi4: 340 },
    'RS': { kpi1: 85.0, kpi2: 890, kpi3: 83.1, kpi4: 940 },
    'SC': { kpi1: 88.3, kpi2: 720, kpi3: 85.0, kpi4: 910 },
    'SE': { kpi1: 73.9, kpi2: 1020, kpi3: 74.0, kpi4: 380 },
    'SP': { kpi1: 87.5, kpi2: 1600, kpi3: 86.2, kpi4: 1200 },
    'TO': { kpi1: 75.7, kpi2: 980, kpi3: 76.8, kpi4: 360 }
  };

  Highcharts.mapChart('container', {
    chart: {
      map: topology,
      backgroundColor: '#fafafa'
    },

    title: {
      text: 'Mapa do Brasil (Clique nos estados para estatísticas)'
    },

    subtitle: {
      text: 'Estatísticas educacionais'
    },

    colorAxis: {
      min: 0,
      max: 1,
      stops: [[0, '#993333']]
    },

    series: [{
      data: data,
      joinBy: 'hc-key',
      name: 'Estados',
      states: {
        hover: {
          backgroundColor: '#fafafa',
          color: '#800000'
        }
      },
      dataLabels: {
        enabled: true,
        formatter: function () {
          return siglasEstados[this.point.name] || '';
        },
        style: {
          fontSize: '14px',
          fontWeight: 'bold',
          color: '#fafafa',
          textOutline: 'none'
        }
      },
      tooltip: {
        enabled: true,
        formatter: function () {
          return 'Clique aqui';
        }
      },
      borderColor: '#ffffff',
      borderWidth: 0.1,

      point: {
        events: {
          click: function () {
            const estadoNome = this.name;
            const estadoSigla = siglasEstados[estadoNome];

            const dados = dadosPorEstado[estadoSigla];
            if (dados) {
              document.getElementById('valor1').innerText = dados.kpi1 + '%';
              document.getElementById('valor2').innerText = dados.kpi2;
              document.getElementById('valor3').innerText = dados.kpi3 + '%';
              document.getElementById('valor4').innerText = dados.kpi4;
            }
          }
        }
      }
    }]
  });
})();

</script>